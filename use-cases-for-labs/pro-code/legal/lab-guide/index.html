<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="IBM watsonx Agentic AI Bootcamp, presented by IBM Ecosystem Engineering Lab, Client Engineering."><meta name=author content="IBM Ecosystem Engineering Lab"><link href=https://ibm.github.io/EEL-agentic-ai-bootcamp/docs/use-cases-for-labs/pro-code/legal/lab-guide/ rel=canonical><link href=../document-processing/ rel=prev><link href=../../insurance-claim/insurance-claim-pre-authorization/ rel=next><link rel=icon href=../../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.9"><title>Lab guide - IBM Agentic AI Bootcamp</title><link rel=stylesheet href=../../../../assets/stylesheets/main.4af4bdda.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.06af60db.min.css><script src=../../../../assets/pymdownx-extras/material-extra-theme-2ek1P7jT.js type=text/javascript></script><script src=../../../../assets/pymdownx-extras/material-extra-3rdparty-BUCF4rjN.js type=text/javascript></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style><link rel=stylesheet href=https://unpkg.com/mermaid@8.5.1/dist/mermaid.css><link rel=stylesheet href=../../../../assets/pymdownx-extras/extra-c6ab11540a.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=cyan data-md-color-accent=yellow> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#lab-guide-for-document-processing-workflow class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=header.title> <a href=https://ibm.github.io/EEL-agentic-ai-bootcamp/docs/ title="IBM Agentic AI Bootcamp" class="md-header__button md-logo" aria-label="IBM Agentic AI Bootcamp"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> IBM Agentic AI Bootcamp </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Lab guide </span> </div> </div> </div> <div class=md-header__options> <div class="md-header-nav__scheme md-header-nav__button md-source__icon md-icon"> <a href=javascript:toggleScheme(); title="Light mode" class=light-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </a> <a href=javascript:toggleScheme(); title="Dark mode" class=dark-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </a> <a href=javascript:toggleScheme(); title="System preference" class=system-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07zm-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13zm-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87zM19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35zm4.33-2.7 1.15-2.77 2.2 2.54zm1.15-4.96-1.14-2.78 3.34.24zM9.63 18.93l2.77 1.15-2.53 2.19z"/></svg> </a> <a href=javascript:toggleScheme(); title="Unknown scheme" class=unknown-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m15.07 11.25-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 0 0-2-2 2 2 0 0 0-2 2H8a4 4 0 0 1 4-4 4 4 0 0 1 4 4 3.2 3.2 0 0 1-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10c0-5.53-4.5-10-10-10"/></svg> </a> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/IBM/EEL-agentic-ai-bootcamp title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title="IBM Agentic AI Bootcamp" class="md-nav__button md-logo" aria-label="IBM Agentic AI Bootcamp" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> IBM Agentic AI Bootcamp </label> <div class=md-nav__source> <a href=https://github.com/IBM/EEL-agentic-ai-bootcamp title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../.. class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../../../show-and-tell/ class=md-nav__link> <span class=md-ellipsis> Show and tell </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Hands-on labs </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Hands-on labs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../labs/env-setup-lab/ class=md-nav__link> <span class=md-ellipsis> Lab 0 - Environment setup </span> </a> </li> <li class=md-nav__item> <a href=../../../../labs/low-code-lab/ class=md-nav__link> <span class=md-ellipsis> Lab 1 - watsonx Orchestrate Agent Builder (low-code) </span> </a> </li> <li class=md-nav__item> <a href=../../../../labs/pro-code-lab/ class=md-nav__link> <span class=md-ellipsis> Lab 2 - watsonx Orchestrate Multi-agent (pro-code) </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Use cases for labs </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Use cases for labs </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> Low-code </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Low-code </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_1> <label class=md-nav__link for=__nav_4_1_1 id=__nav_4_1_1_label tabindex=0> <span class=md-ellipsis> Customer service </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_1> <span class="md-nav__icon md-icon"></span> Customer service </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../low-code/ai-powered-customer-service/customer-service/ class=md-nav__link> <span class=md-ellipsis> Use case details </span> </a> </li> <li class=md-nav__item> <a href=../../../low-code/ai-powered-customer-service/lab-guide/ class=md-nav__link> <span class=md-ellipsis> Lab guide </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_2> <label class=md-nav__link for=__nav_4_1_2 id=__nav_4_1_2_label tabindex=0> <span class=md-ellipsis> Vehicle maintenance </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_2> <span class="md-nav__icon md-icon"></span> Vehicle maintenance </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../low-code/automobile/vehicle-maintenance/ class=md-nav__link> <span class=md-ellipsis> Use case details </span> </a> </li> <li class=md-nav__item> <a href=../../../low-code/automobile/lab-guide/ class=md-nav__link> <span class=md-ellipsis> Lab guide </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_3> <label class=md-nav__link for=__nav_4_1_3 id=__nav_4_1_3_label tabindex=0> <span class=md-ellipsis> HR use case </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_3> <span class="md-nav__icon md-icon"></span> HR use case </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../low-code/chro/hr-use-case/ class=md-nav__link> <span class=md-ellipsis> Use case details </span> </a> </li> <li class=md-nav__item> <a href=../../../low-code/chro/lab-guide/ class=md-nav__link> <span class=md-ellipsis> Lab guide </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2 checked> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> Pro-code </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=true> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Pro-code </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_1 checked> <label class=md-nav__link for=__nav_4_2_1 id=__nav_4_2_1_label tabindex=0> <span class=md-ellipsis> Document processing </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_1_label aria-expanded=true> <label class=md-nav__title for=__nav_4_2_1> <span class="md-nav__icon md-icon"></span> Document processing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../document-processing/ class=md-nav__link> <span class=md-ellipsis> Use case details </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Lab guide </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Lab guide </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#pre-requisites class=md-nav__link> <span class=md-ellipsis> Pre-requisites </span> </a> </li> <li class=md-nav__item> <a href=#reference-architecture class=md-nav__link> <span class=md-ellipsis> Reference Architecture </span> </a> </li> <li class=md-nav__item> <a href=#key-components class=md-nav__link> <span class=md-ellipsis> Key Components </span> </a> </li> <li class=md-nav__item> <a href=#steps class=md-nav__link> <span class=md-ellipsis> Steps </span> </a> <nav class=md-nav aria-label=Steps> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-an-agent class=md-nav__link> <span class=md-ellipsis> Create an Agent </span> </a> </li> <li class=md-nav__item> <a href=#create-an-agentic-workflow class=md-nav__link> <span class=md-ellipsis> Create an agentic workflow </span> </a> </li> <li class=md-nav__item> <a href=#define-the-process-output class=md-nav__link> <span class=md-ellipsis> Define the process output </span> </a> </li> <li class=md-nav__item> <a href=#design-the-workflow-diagram class=md-nav__link> <span class=md-ellipsis> Design the workflow diagram </span> </a> </li> <li class=md-nav__item> <a href=#add-a-document-classifier class=md-nav__link> <span class=md-ellipsis> Add a document classifier </span> </a> </li> <li class=md-nav__item> <a href=#add-a-branch-node class=md-nav__link> <span class=md-ellipsis> Add a Branch node </span> </a> </li> <li class=md-nav__item> <a href=#add-a-document-extractor class=md-nav__link> <span class=md-ellipsis> Add a document extractor </span> </a> </li> <li class=md-nav__item> <a href=#add-a-display-to-user-activity class=md-nav__link> <span class=md-ellipsis> Add a Display to user activity </span> </a> </li> <li class=md-nav__item> <a href=#define-the-end-flow class=md-nav__link> <span class=md-ellipsis> Define the end flow </span> </a> </li> <li class=md-nav__item> <a href=#add-a-behavior class=md-nav__link> <span class=md-ellipsis> Add a behavior </span> </a> </li> <li class=md-nav__item> <a href=#test-your-agent class=md-nav__link> <span class=md-ellipsis> Test your agent </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_2> <label class=md-nav__link for=__nav_4_2_2 id=__nav_4_2_2_label tabindex=0> <span class=md-ellipsis> Insurance claim </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_2> <span class="md-nav__icon md-icon"></span> Insurance claim </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_2_1> <label class=md-nav__link for=__nav_4_2_2_1 id=__nav_4_2_2_1_label tabindex=0> <span class=md-ellipsis> Pre authorization for cashless hospitalization </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_2_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_2_1> <span class="md-nav__icon md-icon"></span> Pre authorization for cashless hospitalization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../insurance-claim/insurance-claim-pre-authorization/ class=md-nav__link> <span class=md-ellipsis> Use case details </span> </a> </li> <li class=md-nav__item> <a href=../../insurance-claim/lab-guide/ class=md-nav__link> <span class=md-ellipsis> Lab guide </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_2_2> <label class=md-nav__link for=__nav_4_2_2_2 id=__nav_4_2_2_2_label tabindex=0> <span class=md-ellipsis> Post hospitalization claim </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_2_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_2_2> <span class="md-nav__icon md-icon"></span> Post hospitalization claim </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../insurance-claim-post/insurance-claim-post-hospitalization/ class=md-nav__link> <span class=md-ellipsis> Use case details </span> </a> </li> <li class=md-nav__item> <a href=../../insurance-claim-post/lab-guide/ class=md-nav__link> <span class=md-ellipsis> Lab guide </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_3> <label class=md-nav__link for=__nav_4_2_3 id=__nav_4_2_3_label tabindex=0> <span class=md-ellipsis> Financial research and analysis </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_3> <span class="md-nav__icon md-icon"></span> Financial research and analysis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../bfsi/financial-research-and-analysis/ class=md-nav__link> <span class=md-ellipsis> Use case details </span> </a> </li> <li class=md-nav__item> <a href=../../bfsi/lab-guide/ class=md-nav__link> <span class=md-ellipsis> Lab guide </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_4> <label class=md-nav__link for=__nav_4_2_4 id=__nav_4_2_4_label tabindex=0> <span class=md-ellipsis> Supply chain </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_4> <span class="md-nav__icon md-icon"></span> Supply chain </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../supply-chain/supply-chain/ class=md-nav__link> <span class=md-ellipsis> Use case details </span> </a> </li> <li class=md-nav__item> <a href=../../supply-chain/lab-guide/ class=md-nav__link> <span class=md-ellipsis> Lab guide </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Demo use cases </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Demo use cases </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../demo-use-cases/governance-demo/ class=md-nav__link> <span class=md-ellipsis> AI Agent Governance </span> </a> </li> <li class=md-nav__item> <a href=../../../../demo-use-cases/travel-planner-demo/ class=md-nav__link> <span class=md-ellipsis> Travel planner </span> </a> </li> <li class=md-nav__item> <a href=../../../../demo-use-cases/maximo-workorder-maintenance-demo/ class=md-nav__link> <span class=md-ellipsis> Maximo Workorder Maintenance </span> </a> </li> <li class=md-nav__item> <a href=../../../../demo-use-cases/hashi-demo/ class=md-nav__link> <span class=md-ellipsis> HashiCorp vault </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../conclusion/ class=md-nav__link> <span class=md-ellipsis> Conclusion </span> </a> </li> <li class=md-nav__item> <a href=../../../../troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#pre-requisites class=md-nav__link> <span class=md-ellipsis> Pre-requisites </span> </a> </li> <li class=md-nav__item> <a href=#reference-architecture class=md-nav__link> <span class=md-ellipsis> Reference Architecture </span> </a> </li> <li class=md-nav__item> <a href=#key-components class=md-nav__link> <span class=md-ellipsis> Key Components </span> </a> </li> <li class=md-nav__item> <a href=#steps class=md-nav__link> <span class=md-ellipsis> Steps </span> </a> <nav class=md-nav aria-label=Steps> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-an-agent class=md-nav__link> <span class=md-ellipsis> Create an Agent </span> </a> </li> <li class=md-nav__item> <a href=#create-an-agentic-workflow class=md-nav__link> <span class=md-ellipsis> Create an agentic workflow </span> </a> </li> <li class=md-nav__item> <a href=#define-the-process-output class=md-nav__link> <span class=md-ellipsis> Define the process output </span> </a> </li> <li class=md-nav__item> <a href=#design-the-workflow-diagram class=md-nav__link> <span class=md-ellipsis> Design the workflow diagram </span> </a> </li> <li class=md-nav__item> <a href=#add-a-document-classifier class=md-nav__link> <span class=md-ellipsis> Add a document classifier </span> </a> </li> <li class=md-nav__item> <a href=#add-a-branch-node class=md-nav__link> <span class=md-ellipsis> Add a Branch node </span> </a> </li> <li class=md-nav__item> <a href=#add-a-document-extractor class=md-nav__link> <span class=md-ellipsis> Add a document extractor </span> </a> </li> <li class=md-nav__item> <a href=#add-a-display-to-user-activity class=md-nav__link> <span class=md-ellipsis> Add a Display to user activity </span> </a> </li> <li class=md-nav__item> <a href=#define-the-end-flow class=md-nav__link> <span class=md-ellipsis> Define the end flow </span> </a> </li> <li class=md-nav__item> <a href=#add-a-behavior class=md-nav__link> <span class=md-ellipsis> Add a behavior </span> </a> </li> <li class=md-nav__item> <a href=#test-your-agent class=md-nav__link> <span class=md-ellipsis> Test your agent </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=lab-guide-for-document-processing-workflow>Lab guide for document processing workflow<a class=headerlink href=#lab-guide-for-document-processing-workflow title="Permanent link">&para;</a></h1> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>This lab focuses on a practical use case involving document classification, followed by key data extraction from both unstructured documents (primarily contracts) and structured ones (such as invoices). At the outset, the guide outlines the sequence of activities required to support the user journey of extracting essential information from uploaded documents.</p> <p>In this lab scenario, a financial services firm processes numerous contracts and invoices weekly, extracting critical information like payment terms, amounts, and due dates. Currently, this is done manually, consuming significant employee time and increasing the risk of errors. With growing document volumes, the firm faces scalability challenges and inefficiencies in their processes.</p> <h2 id=pre-requisites>Pre-requisites<a class=headerlink href=#pre-requisites title="Permanent link">&para;</a></h2> <ul> <li>Make sure you've already setup the environment:</li> <li><a href=../../../../labs/env-setup-lab/ >Lab 0 - Environment setup</a></li> <li><a href=https://developer.watson-orchestrate.ibm.com/getting_started/installing target=_blank>ADK Installation</a></li> <li><a href=https://ibm.box.com/s/n0pkqfjzwxi3cvzaq8msaclfnf7mbwro target=_blank>Download files</a></li> <li>Download the <strong>document-extraction-lab.zip</strong> file from Lab2 folder.</li> </ul> <h2 id=reference-architecture>Reference Architecture<a class=headerlink href=#reference-architecture title="Permanent link">&para;</a></h2> <p><img alt=image src=../../../../images/legal/architecture.png></p> <h2 id=key-components>Key Components<a class=headerlink href=#key-components title="Permanent link">&para;</a></h2> <p><strong>Agents</strong></p> <ul> <li>Document Processing Agent (Main Agent): Manages end-to-end document ingestion, classification, extraction, and display.</li> </ul> <p><strong>Workflow</strong></p> <ul> <li>Document Classifier: Distinguishes between document types (Invoice vs. Contract).</li> <li>Document Extractor (Contract Extractor): Extracts fields such as Buyer, Supplier, and Effective Date from contract documents.</li> <li>Document Extractor (Invoice Extractor): Extracts Invoice Number, Terms, Description, and Bill To address from invoice documents.</li> <li>Branch Node: Routes the workflow to the appropriate extractor based on document type.</li> <li>Display to User Activity: Displays extracted fields in a readable message format for end users.</li> <li>End Node: Returns the final classification result (Contract or Invoice) as output.</li> </ul> <h2 id=steps>Steps<a class=headerlink href=#steps title="Permanent link">&para;</a></h2> <h3 id=create-an-agent>Create an Agent<a class=headerlink href=#create-an-agent title="Permanent link">&para;</a></h3> <ol> <li> <p>Open the watsonx Orchestrate UI. Click on <strong>Create new agent</strong> on the bottom left. <img alt=create-wxO-agent src=../../../../images/create-wxo_agent.png></p> </li> <li> <p>Enter <code>Document processing agent</code> into the Name field (A), then enter <code>This agent is able to classify documents and extract core fields to retrieve</code> into the Description field (B) and click Create (C). <img alt=op-1 src=../../../../images/legal/2.png></p> </li> </ol> <p>The Agent Builder opens; the screen is divided into three key areas:</p> <ul> <li><strong>Navigation Panel (A):</strong> move between different sections of Agent Builder.</li> <li><strong>Configuration (B):</strong> set up and customize the functionality of your agent.</li> <li><strong>Preview (C):</strong> preview and test your agent. <img alt=op-2 src=../../../../images/legal/3.png></li> </ul> <p>Below is a description of each section:</p> <ul> <li> <p><strong>Profile:</strong> Define your agents purpose, usage scenarios, and interaction style. Describe what the agent does, when it should be used (especially in multi-agent configurations), and choose its style Default or ReAct guide how it interprets requests, plans, and uses tools.</p> </li> <li> <p><strong>Knowledge:</strong> Equip your agent with knowledge by uploading files or connecting to conversational search platforms such as Milvus, Elasticsearch, or custom-built sources. This ensures the agent can generate accurate, contextual responses by drawing on relevant content.</p> </li> <li> <p><strong>Toolset:</strong> Provide your agent with tools to perform tasks. Tools can be added from the Catalog, imported from OpenAPI specification files or MCP servers, or built with custom flows. Tools extend the agents capabilities, enabling it to automate actions such as retrieving data or sending emails.</p> </li> <li> <p><strong>Behavior:</strong> Define how the agent interacts with users, formats data, and handles requests. Add rules and instructions to shape its tone, response style, and overall behavior during interactions.</p> </li> <li> <p><strong>Channels:</strong> Connect your agent to communication platforms like Slack or embed it in a website.</p> </li> </ul> <h3 id=create-an-agentic-workflow>Create an agentic workflow<a class=headerlink href=#create-an-agentic-workflow title="Permanent link">&para;</a></h3> <ol> <li> <p>Click Toolset (A). Add click add tool (B). <img alt=op-3 src=../../../../images/legal/4.png></p> </li> <li> <p>Click on Create an agentic workflow (A). <img alt=op-4 src=../../../../images/legal/5.png></p> </li> <li> <p>Click the pencil icon (A) to rename the workflow. <img alt=op-6 src=../../../../images/legal/6.png></p> </li> <li> <p>Type <code>Document processing</code> in the Name (A). Type <code>This flow classifies and extracts values from documents.</code> In the Description (B). Scroll down to the Output section (C). <img alt=op-7 src=../../../../images/legal/7.png></p> </li> </ol> <h3 id=define-the-process-output>Define the process output<a class=headerlink href=#define-the-process-output title="Permanent link">&para;</a></h3> <p>Scrolling down, you’ll find the Input and Output sections, which apply to the entire flow. In this case, no inputs are required since they are already handled within the flow itself through the user activity file upload. For the output, instead of using a text output node, the flow can return the classification result, defined as a string.</p> <ol> <li> <p>Click Add output (A). and select String (B). <img alt=op-8 src=../../../../images/legal/8.png></p> </li> <li> <p>Type “Class_name” in the Name field (A). Click Add (B). Then click Save (C). <img alt=op-9 src=../../../../images/legal/9.png></p> </li> </ol> <h3 id=design-the-workflow-diagram>Design the workflow diagram<a class=headerlink href=#design-the-workflow-diagram title="Permanent link">&para;</a></h3> <p>In this section, you will add the different workflow activities including the document classifier and the 2 extractors.</p> <ol> <li> <p>Move the cursor over the link until the + icon appears. Click the + to add an activity (A). The first activity of the process consists in uploading the document to process. It will be implemented as a user activity. <img alt=op-10 src=../../../../images/legal/10.png></p> </li> <li> <p>Select Create new (A) and then select User activity (B). <img alt=op-11 src=../../../../images/legal/11.png></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>A green box appears, indicating the user activity. This will contain the series of activities that the user must perform whilst interacting with the agent.</p> </div> </li> <li> <p>Move the cursor on the user activity link and click + (A) to add the activities the user will have to perform. <img alt=op-12 src=../../../../images/legal/12.png></p> </li> <li> <p>Select the Interactions tab (A) then click File upload (B). <img alt=op-13 src=../../../../images/legal/13.png></p> </li> </ol> <p>The first activity of the process is now defined. The next step is to classify the document the user will have provided. To do this, you will add a watsonx Orchestrate Document Classifier. <img alt=op-14 src=../../../../images/legal/14.png></p> <h3 id=add-a-document-classifier>Add a document classifier<a class=headerlink href=#add-a-document-classifier title="Permanent link">&para;</a></h3> <p>In this section, you will add a document classifier to identify Invoice documents from the Contract ones.</p> <ol> <li> <p>Move the cursor over the last link of the process and click + (A). Select Create new (B) then click Document classifier (C). <img alt=op-15 src=../../../../images/legal/15.png></p> </li> <li> <p>Click the Document classifier node (A). <img alt=op-16 src=../../../../images/legal/16.png></p> </li> <li> <p>Click the edit icon (A). <img alt=op-17 src=../../../../images/legal/17.png></p> </li> <li> <p>Click Add class (A). <img alt=op-18 src=../../../../images/legal/18.png></p> </li> <li> <p>Type <code>Contract</code> (A). <img alt=op-19 src=../../../../images/legal/19.png></p> </li> <li> <p>Click Add class again and then type ‘Invoice’ (A). <img alt=op-20 src=../../../../images/legal/20.png></p> <p>You are now ready to test your document classifier.</p> </li> <li> <p>Click Test classifier (A). <img alt=op-21 src=../../../../images/legal/21.png></p> </li> <li> <p>Drag and drop the two sample files, <code>Invoice.pdf</code> and <code>Contract.pdf</code> from your local machine location (A). <img alt=op-22 src=../../../../images/legal/22.png></p> </li> <li> <p>Wait for the documents to be analyzed and classified (A). <img alt=op-23 src=../../../../images/legal/23.png></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The two documents have been successfully classified as a Contract class for contract.pdf and an Invoice class for the Invoice.pdf one.</p> </div> </li> <li> <p>Click Done (A). <img alt=op-24 src=../../../../images/legal/24.png></p> <p>The next step is to route the process on the right extractor path depending on the document type. To do this, you will add a branch node responsible for the triage.</p> </li> </ol> <h3 id=add-a-branch-node>Add a Branch node<a class=headerlink href=#add-a-branch-node title="Permanent link">&para;</a></h3> <ol> <li> <p>Move the cursor over the last link of the diagram then click + (A). <img alt=op-25 src=../../../../images/legal/25.png></p> </li> <li> <p>Click Branch (A). <img alt=op-26 src=../../../../images/legal/26.png></p> </li> <li> <p>Click the Branch 1 node (A). <img alt=op-27 src=../../../../images/legal/27.png></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>When creating a branch from scratch, two paths are generated by default, but additional paths can be added as needed.</p> </div> </li> <li> <p>Move the cursor over the Branch 1 name then click the edit icon (A) <img alt=op-28 src=../../../../images/legal/28.png></p> </li> <li> <p>Type <code>Document type</code> in the node name field (A) then hit Enter. <img alt=op-29 src=../../../../images/legal/29.png></p> </li> <li> <p>Click the Path 1 row (A). <img alt=op-30 src=../../../../images/legal/30.png></p> </li> <li> <p>Type <code>Invoice</code> (A). <img alt=op-31 src=../../../../images/legal/31.png></p> </li> <li> <p>Click Edit condition (A) to edit the condition and select invoice documents. <img alt=op-32 src=../../../../images/legal/32.png></p> </li> <li> <p>Click the + icon (A) to add conditions. <img alt=op-33 src=../../../../images/legal/33.png></p> <p>You will use the result of the Document classifier step as the variable to evaluate for the routing.</p> </li> <li> <p>Click Document classifier (A) and then click class_name (B). <img alt=op-34 src=../../../../images/legal/34.png></p> </li> <li> <p>Select the ‘==’ operator (A). <img alt=op-35 src=../../../../images/legal/35.png></p> </li> <li> <p>Click + to specify the value to check (A). <img alt=op-36 src=../../../../images/legal/36.png></p> </li> <li> <p>Type ‘Invoice’ (A) then hit Enter. <img alt=op-37 src=../../../../images/legal/37.png></p> <p>The process will be routed in this branch if the document type is Invoice.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Conditions can also be edited with the expression editor ( icon). The equivalent expression to enter using the expression editor will then be: flow["Document classifier"].output.class_name == "Contract"</p> </div> </li> <li> <p>Click the Back icon (A). <img alt=op-38 src=../../../../images/legal/38.png></p> <p>Let’s just rename the second path Contract. As you will just have 2 types of documents, any document that is not an invoice (i.e. contracts) will be routed to this branch.</p> </li> <li> <p>Click the Path 2 row (A). <img alt=op-39 src=../../../../images/legal/39.png></p> </li> <li> <p>Type Contract (A) then hit Return. <img alt=op-40 src=../../../../images/legal/40.png></p> <p>You are now ready to add the 2 document extractors, one for each document type.</p> </li> </ol> <h3 id=add-a-document-extractor>Add a document extractor<a class=headerlink href=#add-a-document-extractor title="Permanent link">&para;</a></h3> <p>In this section, you will create two document extractors. Each document extractor will be responsible for extracting specific data from each document class:</p> <p>Invoice:</p> <ul> <li>Invoice #</li> <li>Terms</li> <li>Description</li> </ul> <p>Contract:</p> <ul> <li>Buyer</li> <li>Supplier</li> <li>Effective date</li> </ul> <p>&nbsp;</p> <ol> <li> <p>Click Add + (A). <img alt=op-41 src=../../../../images/legal/41.png></p> </li> <li> <p>Select Create new (A) then click Document extractor (B). <img alt=op-42 src=../../../../images/legal/42.png></p> </li> <li> <p>Click the Document extractor node (A) then click the edit icon (B). <img alt=op-43 src=../../../../images/legal/43.png></p> </li> <li> <p>Click the Document extractor name (A) to edit it. <img alt=op-44 src=../../../../images/legal/44.png></p> </li> <li> <p>Type ‘Contract extractor’ (A) as a new name then click the save icon (B). <img alt=op-45 src=../../../../images/legal/45.png></p> </li> <li> <p>Drag and drop the Contract.pdf file (A) from your computer to the dropping area. <img alt=op-46 src=../../../../images/legal/46.png></p> </li> <li> <p>Wait for the document to be processed. <img alt=op-47 src=../../../../images/legal/47.png></p> </li> <li> <p>Once uploaded, the sample document is displayed, and the page is divided into the following key segments:</p> <ol> <li><strong>Activity Name</strong> – Displays the name of the document extractor activity. Rename it to reflect the sample document you've uploaded.</li> <li><strong>LLM Model Selection</strong> – Choose your preferred LLM model from the drop-down menu. You can switch models at any time while prompting them for document extraction.</li> <li><strong>Field Definitions</strong> – Define the list of fields you want to extract from the sample document. The selected LLM will retrieve the corresponding values.</li> <li><strong>Document Navigation &amp; Upload</strong> – Use the drop-down to navigate between uploaded documents. You can upload up to five additional documents for prompting and testing.</li> <li><strong>Document Viewer:</strong> Shows the uploaded document with the specified fields for extraction highlighted. <img alt=op-48 src=../../../../images/legal/48.png></li> </ol> </li> <li> <p>Click the model expand icon (A). <img alt=op-49 src=../../../../images/legal/49.png></p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>You can change the LLM model by clicking on the ‘Model’ drop-down. Here you’ll see all the available models that you can select. You can identify the current model that is being used, as you’ll see a tick icon. You can change the model at any time while you test to see which one is most accurate at extracting fields. For now keep the meta-lama model.</p> </div> <p>Let’s now define the fields to extract.</p> </li> <li> <p>Click Add field (A). <img alt=op-50 src=../../../../images/legal/50.png></p> </li> <li> <p>Type <code>Buyer</code> (A) and hit Return. <img alt=op-51 src=../../../../images/legal/51.png></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The LLM will retrieve a value associated with the key you define here, which will auto-highlight in the document preview.</p> </div> </li> <li> <p>In the same way, add the 2 following fields:</p> <ul> <li>Supplier</li> <li>Effective date</li> </ul> <p>Your screen should look like: <img alt=op-52 src=../../../../images/legal/52.png></p> </li> <li> <p>Click x (A) to close the extractor. <img alt=op-53 src=../../../../images/legal/53.png></p> </li> <li> <p>Click in the background to close the Contract extractor property view (A). <img alt=op-54 src=../../../../images/legal/54.png></p> <p>Next, you will create the Invoice extractor in the corresponding branch of the process.</p> </li> <li> <p>Move the mouse over the invoice branch and click + (A) <img alt=op-55 src=../../../../images/legal/55.png></p> </li> <li> <p>Select Document extractor (A). <img alt=op-56 src=../../../../images/legal/56.png></p> </li> <li> <p>Click the Document extractor node a move it for a nicer layout (A). <img alt=op-57 src=../../../../images/legal/57.png></p> </li> <li> <p>Repeat the from step 3 to:</p> <ul> <li>Rename the extractor ‘Invoice Extractor’.</li> <li>Add the <code>Invoice.pdf</code> document to the extractor.</li> </ul> <p>You should have the following screen: <img alt=op-58 src=../../../../images/legal/58.png></p> <p>Let’s now add the fields to extract.</p> </li> <li> <p>Click Add field (A). <img alt=op-59 src=../../../../images/legal/59.png></p> </li> <li> <p>Type Invoice (A) and hit Return. <img alt=op-60 src=../../../../images/legal/60.png></p> </li> <li> <p>The invoice number should have been recognized (A): <img alt=op-61 src=../../../../images/legal/61.png></p> </li> <li> <p>Repeat from Step 20 to add the following fields:</p> <ul> <li>Terms</li> <li>Description <img alt=op-62 src=../../../../images/legal/62.png></li> </ul> </li> <li> <p>You will now add the Bill to field. Click Add + (A) <img alt=op-63 src=../../../../images/legal/63.png></p> </li> <li> <p>Type ‘Bill to’ (A) end press Enter. <img alt=op-64 src=../../../../images/legal/64.png></p> </li> <li> <p>Observe the result (A). <img alt=op-65 src=../../../../images/legal/65.png></p> <p>The entire billing address was not correctly highlighted. Let’s train the model to recognize the address field.</p> </li> <li> <p>Hover your mouse over the ‘Bill to’ field and click on the edit icon (A). <img alt=op-66 src=../../../../images/legal/66.png></p> </li> <li> <p>The left pane appears (A) so you can re-prompt your model to more accurately extract the value for the selected field. Let’s Add example showing where and how to extract the Bill to information. <img alt=op-67 src=../../../../images/legal/67.png></p> </li> <li> <p>Click Add example (A). <img alt=op-68 src=../../../../images/legal/68.png></p> <p>The ‘Input’ and ‘Output’ sections will appear, allowing you to specify the exact key-value pair you want to extract from the sample document. This helps to re-prompt the model to accurately capture the full value for the selected field.</p> </li> <li> <p>Click inside the ‘Input’ field (A) to enable ‘Select to Copy’ mode, then draw a box around the entire key-value pair (B) on the document to define what should be extracted. <img alt=op-69 src=../../../../images/legal/69.png></p> <p>As soon as you release the mouse button the entire text is captured in the Input Field. The model now knows where to find the information. But the ‘Bill to’ text is not required. You will now teach the model what the output should be for this precise example.</p> </li> <li> <p>Click inside the ‘Output’ field to enable ‘Select to Copy’ mode (A) then draw a box around the address section (B) on the document to define what should be extracted (excluding ‘Bill to’). <img alt=op-70 src=../../../../images/legal/70.png></p> </li> <li> <p>Once highlighted, release the mouse button and this will auto-populate the Output section (A). <img alt=op-71 src=../../../../images/legal/71.png></p> </li> <li> <p>Click the Show on Document button (A) to let the LLM retry the extraction. <img alt=op-72 src=../../../../images/legal/72.png></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The LLM will use the re-prompt the key-value pair and highlight the updated value in the document preview.</p> </div> </li> <li> <p>The ‘Bill To’ address is re-highlighted (A) after prompting the model, indicating that the LLM has been successfully trained to extract this information. Click on the ‘back’ icon (B) to return to the original page. <img alt=op-73 src=../../../../images/legal/73.png></p> <div class="admonition warning"> <p class=admonition-title>Note</p> <p>The model can only be prompted using unstructured data. Re-prompting on structured formats, like tables, is not currently supported. Please check with your instructors who can guide you with the <a href=https://w3.ibm.com/w3publisher/orchestrate/roadmap>ProductRoadmap</a> for more details.</p> </div> </li> <li> <p>All the fields that you’ve defined are highlighted on the sample document. Once complete, click X to close the window (A). <img alt=op-74 src=../../../../images/legal/74.png></p> </li> <li> <p>Click on the diagram background to close the Invoice extractor property view (A). <img alt=op-75 src=../../../../images/legal/75.png></p> <p>You will now add the user display activities for each branch.</p> </li> </ol> <h3 id=add-a-display-to-user-activity>Add a Display to user activity<a class=headerlink href=#add-a-display-to-user-activity title="Permanent link">&para;</a></h3> <p>To complete the flow, we need to add a final activity that presents the extracted values to the user. This step allows us to format and display the results clearly, based on the core fields that we defined when we prompted the model for each document type.</p> <ol> <li> <p>Hover the last link in the Contract extractor branch and click + (A). <img alt=op-76 src=../../../../images/legal/76.png></p> </li> <li> <p>Select Create new (A) then click User activity (B). <img alt=op-77 src=../../../../images/legal/77.png></p> </li> <li> <p>Click + (A) to add a new action in the user activity node. <img alt=op-78 src=../../../../images/legal/78.png></p> </li> <li> <p>Click Display to user (A). <img alt=op-79 src=../../../../images/legal/79.png></p> </li> <li> <p>Select Message (A). <img alt=op-80 src=../../../../images/legal/80.png></p> </li> <li> <p>Click the Message box to edit its content (A). <img alt=op-81 src=../../../../images/legal/81.png></p> </li> <li> <p>Hover the Message 1 name (A) then click the edit button (B) to rename it. <img alt=op-82 src=../../../../images/legal/82.png></p> </li> <li> <p>Type <code>Extracted contract fields</code> (A) and hit Return. <img alt=op-83 src=../../../../images/legal/83.png></p> </li> <li> <p>Type <code>**Buyer**:</code> in the Output message field (A) CHANGE THIS <img alt=op-84 src=../../../../images/legal/84.png></p> </li> <li> <p>To display the results for the field, ‘Buyer’ you must assign a variable to it. Click on the Select variable ‘[x]’ button. <img alt=op-85 src=../../../../images/legal/85.png></p> </li> <li> <p>Under the ‘Contract extractor’ menu click on the buyer variable (A). <img alt=op-86 src=../../../../images/legal/86.png></p> </li> <li> <p>Your screen should look like (A): <img alt=op-87 src=../../../../images/legal/87.png></p> </li> <li> <p>Repeat from step 9 to add the remaining fields defined in the Contract extractor:</p> <ul> <li>Supplier</li> <li>Effective date</li> </ul> <p>Your screen should look like (A): <img alt=op-88 src=../../../../images/legal/88.png></p> </li> <li> <p>Click the background to remove the property view (A). <img alt=op-89 src=../../../../images/legal/89.png></p> </li> <li> <p>Repeating from Step 1, create a user activity in the Invoice branch (A) to display the following fields:</p> <ul> <li>Invoice #</li> <li>Terms</li> <li>Description</li> <li>Bill to <img alt=op-90 src=../../../../images/legal/90.png></li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The invoice variables will be under the Invoice extractor folder.</p> </div> </li> <li> <p>You should get the following result: <img alt=op-91 src=../../../../images/legal/91.png></p> </li> </ol> <h3 id=define-the-end-flow>Define the end flow<a class=headerlink href=#define-the-end-flow title="Permanent link">&para;</a></h3> <p>Now that the output message has been defined for both file types, we can now conclude the flow by updating the end node. The end node will just return the Document type (i.e. Contract/Invoice).</p> <ol> <li> <p>Click the End node (A). <img alt=op-92 src=../../../../images/legal/92.png></p> </li> <li> <p>Click Edit data mapping (A). <img alt=op-93 src=../../../../images/legal/93.png></p> <p>Note that the output, ‘class_name’ is auto-mapped by the LLM (A). This means that the LLM will attempt to automatically link the input/outputs. <img alt=op-94 src=../../../../images/legal/94.png></p> <div class="admonition tip"> <p class=admonition-title>Note</p> <p>The auto-map feature works effectively for those flows that are less complex. But for the more complex flows, (for instance if you had two ‘class_name’ outputs) then explicit mapping performs best. </p> </div> </li> <li> <p>Hover the variable row and click on the Variable icon (A). <img alt=op-95 src=../../../../images/legal/95.png></p> </li> <li> <p>Click the Document classifier (A). <img alt=op-96 src=../../../../images/legal/96.png></p> </li> <li> <p>Select class_name (A). <img alt=op-97 src=../../../../images/legal/97.png></p> </li> <li> <p>The output ‘class_name’ is now assigned to the ‘class_name’ variable (A). Click x (B) to close the window. <img alt=op-98 src=../../../../images/legal/98.png></p> </li> <li> <p>Click Done (A). <img alt=op-99 src=../../../../images/legal/99.png></p> </li> </ol> <h3 id=add-a-behavior>Add a behavior<a class=headerlink href=#add-a-behavior title="Permanent link">&para;</a></h3> <p>To trigger the tool you just created, you must update the agent behavior.</p> <ol> <li> <p>Click Behavior (A) and type <code>Invoke the Document extractor tool and output the result</code> (B) in the Instructions. <img alt=op-100 src=../../../../images/legal/102.png></p> <p>Your agent is ready to be tested.</p> </li> </ol> <h3 id=test-your-agent>Test your agent<a class=headerlink href=#test-your-agent title="Permanent link">&para;</a></h3> <p>In this section, you will use the Agent preview to test your agent behavior.</p> <ol> <li> <p>Type <code>Invoke document extractor</code> (A) in the Preview instructions area. <img alt=op-103 src=../../../../images/legal/103.png></p> </li> <li> <p>Click Add file (A). <img alt=op-104 src=../../../../images/legal/104.png></p> </li> <li> <p>Upload the <code>Contract.pdf</code> file and hit send. <img alt=op-105 src=../../../../images/legal/105.png></p> <p>After uploading your document, the agent will automatically execute the predefined workflow steps in the background. It will extract relevant data, focusing on the fields it has been prompted on, and generate a response with the extracted information. Additionally, it will provide insights into the document classification.</p> </li> <li> <p>After a few seconds the agent will reply with the extracted data and the document type (A). <img alt=op-106 src=../../../../images/legal/106.png></p> </li> </ol> <div class="admonition success"> <p class=admonition-title>Conclusion</p> <p>👏 Congratulations on completing the lab! 🎉</p> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=footer.title> <a href=../document-processing/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Use case details </div> </div> </a> <a href=../../insurance-claim/insurance-claim-pre-authorization/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Use case details </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> with emoji by <a href=https://github.com/twitter/twemoji target=_blank rel=noopener> Twemoji </a> </div> <div class=md-social> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.instant", "navigation.tracking", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=https://unpkg.com/mermaid@8.8.4/dist/mermaid.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=../../../../assets/pymdownx-extras/extra-loader-B5CKpNQx.js></script> </body> </html>